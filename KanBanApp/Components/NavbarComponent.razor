@inherits FluxorComponent
@inject IState<KanbanState> State
@inject StateFacade Facade

<div class="navbar">
    @if (State.Value.Boards is not null)
    {
        @foreach (var board in State.Value.Boards)
        {
                <p @onclick="() => Facade.SetCurrentBoard(board.name)">@board.name</p>
        }
    }

    <button @onclick="CreateNewBoard">Create New Board</button>
</div>

@if (_isAddNewBoardShowing)
{
    <CreateBoardComponent OnCreate="CloseCreateComponent" />
}

@code {
    private bool _isAddNewBoardShowing;

    protected override void OnInitialized()
    {
        if (State.Value.Boards is null)
        {
            Facade.LoadKanBan();
        }

        base.OnInitialized();
    }

    private void CreateNewBoard()
    {
        _isAddNewBoardShowing = true;
    }

    private void CloseCreateComponent()
    {
        _isAddNewBoardShowing = false;
    }
}
